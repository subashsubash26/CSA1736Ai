# Define the size of the board
N = 8

def solve_n_queens():
    """
    Main function to solve the N-Queens problem and print the first solution found.
    """
    # The board is represented by an array where board[i] is the column 
    # of the queen in row i.
    board = [0] * N 
    
    if solve_n_queens_util(board, 0):
        print(f"Solution for {N}-Queens Problem:")
        print_board(board)
    else:
        print(f"No solution exists for {N}-Queens.")

def is_safe(board, row, col):
    """
    Checks if a queen can be placed at board[row][col] (represented by array indices).
    We only need to check previous rows (0 to row-1).
    """
    for prev_row in range(row):
        # 1. Check for **same column**
        if board[prev_row] == col:
            return False
        
        # 2. Check for **diagonals**
        # The absolute difference between column indices must equal the 
        # absolute difference between row indices for a diagonal attack.
        if abs(board[prev_row] - col) == abs(prev_row - row):
            return False
            
    return True

def solve_n_queens_util(board, row):
    """
    Recursive utility function to place queens row by row.
    """
    # Base case: If all queens are placed (we've successfully filled up to row N)
    if row >= N:
        return True

    # Try placing the queen in every column of the current 'row'
    for col in range(N):
        if is_safe(board, row, col):
            # Place the queen
            board[row] = col
            
            # Recurse to place the remaining queens in the next row
            if solve_n_queens_util(board, row + 1):
                return True # Solution found!
            
            # Backtrack: If placing the queen here didn't lead to a solution, 
            # the current position (board[row]) will be overwritten 
            # in the next iteration of the loop, effectively backtracking.
            
    # If no column in this row works, return False and trigger backtracking
    return False

def print_board(board):
    """
    Prints the board state using 'Q' for a queen and '.' for an empty square.
    """
    for row in range(N):
        line = ""
        for col in range(N):
            if board[row] == col:
                line += " Q "
            else:
                line += " . "
        print(line)

# Execute the solver
solve_n_queens()
